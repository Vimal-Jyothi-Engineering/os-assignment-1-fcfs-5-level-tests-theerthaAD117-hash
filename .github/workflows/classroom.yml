name: Autograding Tests
'on':
- push
- repository_dispatch
permissions:
  checks: write
  actions: read
  contents: read
jobs:
  run-autograding-tests:
    runs-on: ubuntu-latest
    if: github.actor != 'github-classroom[bot]'
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    - name: FCFS Level 1 – Basic Case
      id: fcfs-level-1-basic-case
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: FCFS Level 1 – Basic Case
        setup-command: ''
        command: gcc fcfs.c -o fcfs && ./fcfs < tests/input1.txt
        input: |-
          1
          P1 0 5
        expected-output: |-
          Waiting Time:
          P1 0
          Turnaround Time:
          P1 5
          Average Waiting Time: 0.00
          Average Turnaround Time: 5.00
        comparison-method: exact
        timeout: 10
        max-score: 10
    - name: FCFS Level 2 – Standard Case
      id: fcfs-level-2-standard-case
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: FCFS Level 2 – Standard Case
        setup-command: ''
        command: gcc fcfs.c -o fcfs && ./fcfs < tests/input2.txt
        input: |-
          3
          P1 0 4
          P2 1 3
          P3 2 2
        expected-output: |-
          Waiting Time:
          P1 0
          P2 3
          P3 5
          Turnaround Time:
          P1 4
          P2 6
          P3 7
          Average Waiting Time: 2.67
          Average Turnaround Time: 5.67
        comparison-method: exact
        timeout: 10
        max-score: 15
    - name: FCFS Level 3 – Sorting Required
      id: fcfs-level-3-sorting-required
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: FCFS Level 3 – Sorting Required
        setup-command: ''
        command: gcc fcfs.c -o fcfs && ./fcfs < tests/input3.txt
        input: |-
          3
          P1 4 2
          P2 0 3
          P3 2 1
        expected-output: |-
          Waiting Time:
          P2 0
          P3 3
          P1 4
          Turnaround Time:
          P2 3
          P3 4
          P1 6
          Average Waiting Time: 2.33
          Average Turnaround Time: 4.33
        comparison-method: exact
        timeout: 10
        max-score: 20
    - name: FCFS Level 4 – Large Input
      id: fcfs-level-4-large-input
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: FCFS Level 4 – Large Input
        setup-command: ''
        command: gcc fcfs.c -o fcfs && ./fcfs < tests/input4.txt
        input: |-
          5
          P1 0 4
          P2 1 5
          P3 2 1
          P4 3 2
          P5 10 3
        expected-output: |-
          Waiting Time:
          P1 0
          P2 3
          P3 7
          P4 8
          P5 0
          Turnaround Time:
          P1 4
          P2 8
          P3 8
          P4 10
          P5 3
          Average Waiting Time: 3.60
          Average Turnaround Time: 6.60
        comparison-method: exact
        timeout: 10
        max-score: 25
    - name: FCFS Level 5 – Edge Cases
      id: fcfs-level-5-edge-cases
      uses: classroom-resources/autograding-io-grader@v1
      with:
        test-name: FCFS Level 5 – Edge Cases
        setup-command: ''
        command: gcc fcfs.c -o fcfs && ./fcfs < tests/input5.txt
        input: |-
          4
          P1 0 0
          P2 0 4
          P3 0 1
          P4 5 3
        expected-output: |-
          Waiting Time:
          P1 0
          P2 0
          P3 4
          P4 0
          Turnaround Time:
          P1 0
          P2 4
          P3 5
          P4 3
          Average Waiting Time: 1.00
          Average Turnaround Time: 3.00
        comparison-method: exact
        timeout: 10
        max-score: 30
    - name: Autograding Reporter
      uses: classroom-resources/autograding-grading-reporter@v1
      env:
        FCFS-LEVEL-1-BASIC-CASE_RESULTS: "${{steps.fcfs-level-1-basic-case.outputs.result}}"
        FCFS-LEVEL-2-STANDARD-CASE_RESULTS: "${{steps.fcfs-level-2-standard-case.outputs.result}}"
        FCFS-LEVEL-3-SORTING-REQUIRED_RESULTS: "${{steps.fcfs-level-3-sorting-required.outputs.result}}"
        FCFS-LEVEL-4-LARGE-INPUT_RESULTS: "${{steps.fcfs-level-4-large-input.outputs.result}}"
        FCFS-LEVEL-5-EDGE-CASES_RESULTS: "${{steps.fcfs-level-5-edge-cases.outputs.result}}"
      with:
        runners: fcfs-level-1-basic-case,fcfs-level-2-standard-case,fcfs-level-3-sorting-required,fcfs-level-4-large-input,fcfs-level-5-edge-cases
